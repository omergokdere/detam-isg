<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>İSG Etkinlik</title>
    <style>
      body {
  font-family: Arial, sans-serif;
  margin: 0; /* Varsayılan margin'i kaldır */
  padding: 0; /* Varsayılan padding'i kaldır */
  background-color: #F7F7F7; /* Arka plan rengi */
  height: 100vh; /* Görünüm alanının tamamını kapla */
  display: flex;
  justify-content: center; /* Container'ı yatayda ortala */
  align-items: center; /* Container'ı dikeyde ortala */
  flex-direction: column; /* QR kodu alta yerleştirmek için dikey düzen */
}

.event-container {
  background: #F7F7F7; /* Body ile aynı arka plan rengi */
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); /* Daha belirgin gölge */
  width: 80%; /* Genişliği %80 yap */
  max-width: 600px; /* Maksimum genişlik 600px */
  overflow-y: auto; /* İçerik taşarsa kaydırma ekle */
}

.logo {
  width: 150px; /* Sabit genişlik */
  height: auto; /* Oranları koru */
  display: block;
  margin: 20px auto; /* Yatayda ortala ve alt boşluk ekle */
}

.question-block {
  margin-bottom: 20px;
}

.choices {
  display: grid;
  grid-template-columns: 1fr 1fr; /* İki sütunlu düzen */
  gap: 10px; /* Hücreler arasında boşluk */
}

.question {
  font-weight: bold; /* Soruları kalın yap */
  margin-bottom: 10px; /* Sorunun altına boşluk ekle */
}

.choices label {
  display: flex; /* Radio buton ve metni hizala */
  align-items: center;
  cursor: pointer;
  border: 1px solid #ccc; /* Çevresine kenarlık ekle */
  border-radius: 5px; /* Kenarları yuvarla */
  padding: 10px; /* İçerik çevresine boşluk ekle */
  transition: background-color 0.3s ease, border-color 0.3s ease; /* Hover efekti */
  background-color: transparent; /* Arka planı şeffaf yap */
}

.choices label:hover {
  background-color: #f0f8ff; /* Hover sırasında açık mavi arka plan */
  border-color: #007bff; /* Hover sırasında kenarlık rengi */
}

.choices input[type="radio"]:checked + label {
  background-color: rgb(43, 28, 255); /* Seçili radio'nun arka planını beyaz yap */
  border-color: #007bff; /* Seçili radio'nun kenarlık rengi */
}

.choices input[type="radio"] {
  margin-right: 10px; /* Radio buton ile metin arasında boşluk */
}

button {
  padding: 10px 20px;
  font-size: 1em;
  border-radius: 6px;
  background-color: #007bff;
  color: white;
  border: none;
  cursor: pointer;
  margin-top: 20px; /* Üstüne boşluk ekle */
  width: 100%; /* Butonu tam genişlik yap */
}

button:hover {
  background-color: #0056b3;
}

.qr-code {
  margin-top: 20px;
  text-align: center;
}

.qr-code img {
  width: 150px;
  height: 150px;
}
      @media (max-width: 480px) {
  .event-container {
    padding: 10px;
  }
  .question {
    font-size: 14px;
  }
  button {
    font-size: 14px;
  }
}

    </style>
    <script>
      window.onpageshow = function(event) {
        if (event.persisted) {
          window.location.reload();
        }
      };
    </script>
  </head>
  <body>
    <div class="event-container">
      <a href="https://www.detam.com.tr/" target="_blank">
  <img src="detam.jpg" alt="Detam Group Logo" class="logo" />
</a>
      <!-- The header will be updated below based on language -->
      <h1>İSG Etkinlik</h1>
      <div id="event"></div>
      <button onclick="submitEvent()">Gönder</button>
    </div>
    <div class="qr-code">
      <p style="display: none;">Detaylı bilgi için QR kodu tarayın:</p>
      <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.detam.com.tr/&size=150x150" alt="QR Code" />
    </div>

    <script>
      // Retrieve language preference (default to Turkish)
      const lang = sessionStorage.getItem('lang') || 'tr';

      // Update heading, button text, QR code sentence, and document title based on language.
      const header = document.querySelector('h1');
      const submitBtn = document.querySelector('.event-container button');
      const qrCodePara = document.querySelector('.qr-code p');
      if (lang === "en") {
          header.textContent = "OSHA Event";
          submitBtn.textContent = "Submit";
          qrCodePara.textContent = "Scan the QR code for more details:";
          document.title = "OSHA Event";
      } else {
          header.textContent = "İSG Etkinlik";
          submitBtn.textContent = "Gönder";
          qrCodePara.textContent = "Detaylı bilgi için QR kodu tarayın:";
          document.title = "İSG Etkinlik";
      }

      // Turkish Event Data
      const eventData_tr = [
        {
          question: "Baret hangi amaçla kullanılır?",
          choices: [
            "Görüşü artırmak", 
            "Baş koruması", 
            "Ayak kaymasını önlemek", 
            "Gürültüyü azaltmak"
          ],
          correct: 1,
        },
        {
          question: "Yangın tüpü hangi renktedir?",
          choices: [
            "Sarı", 
            "Mavi", 
            "Kırmızı", 
            "Yeşil"
          ],
          correct: 2,
        },
        {
          question: "Kulak tıkacı ne için kullanılır?",
          choices: [
            "İşitmeden korunma", 
            "Gürültü önleme", 
            "Yük kaldırma", 
            "Tozdan korunma"
          ],
          correct: 1,
        },
        {
          question: "Gözlük hangi tür KKD'dir?",
          choices: [
            "Solunum", 
            "Düşme önleyici", 
            "Göz koruyucu", 
            "Ayak koruyucu"
          ],
          correct: 2,
        },
        {
          question: "İSG nedir?",
          choices: [
            "İş Sağlığı ve Güvenliği", 
            "İleri Seviye Güç", 
            "İşyeri Sistem Gelişimi", 
            "Bulaşıcı Hastalık"
          ],
          correct: 0,
        },
      ];

      // English Event Data
      const eventData_en = [
        {
          question: "What is the purpose of a safety helmet?",
          choices: [
            "To enhance vision", 
            "Head protection", 
            "Prevent slipping", 
            "Reduce noise"
          ],
          correct: 1,
        },
        {
          question: "What color is the fire extinguisher?",
          choices: [
            "Yellow", 
            "Blue", 
            "Red", 
            "Green"
          ],
          correct: 2,
        },
        {
          question: "What is the purpose of earplugs?",
          choices: [
            "For hearing protection", 
            "For noise prevention", 
            "For heavy lifting", 
            "For dust protection"
          ],
          correct: 1,
        },
        {
          question: "Which type of PPE are safety glasses?",
          choices: [
            "Respiratory", 
            "Fall protection", 
            "Eye protection", 
            "Foot protection"
          ],
          correct: 2,
        },
        {
          question: "What does Occupational Safety and Health (OSHA) mean?",
          choices: [
            "Occupational Safety and Health", 
            "Advanced Strength", 
            "Workplace System Development", 
            "Contagious Diseases"
          ],
          correct: 0,
        },
      ];

      // Select the proper event data based on language.
      const eventData = (lang === 'en') ? eventData_en : eventData_tr;
      const selectedQuestions = eventData.slice(0, 5);
      const eventContainer = document.getElementById("event");

      // Render Event Questions
      selectedQuestions.forEach((q, index) => {
  let questionText = `${index + 1}. ${q.question}`;
  const block = document.createElement("div");
  block.className = "question-block";
  block.innerHTML = `
    <p class="question">${questionText}</p>
    <div class="choices">
      ${q.choices
        .map(
          (c, i) => `

          <label>
            <input type="radio" name="q${index}" value="${i}" aria-label="${c}" /> ${c}
          </label>
        `
        )
        .join("")}
    </div>
  `;
  eventContainer.appendChild(block);
});

      // Submit Event and calculate score
      function submitEvent() {
        let score = 0;
        let unanswered = false;

        selectedQuestions.forEach((q, i) => {
          const sel = document.querySelector(`input[name=q${i}]:checked`);
          if (!sel) unanswered = true;
          if (sel && parseInt(sel.value) === q.correct) score++;
        });

        if (unanswered) {
          alert(lang === "en" ? "Please answer all questions." : "Lütfen tüm soruları cevaplayın.");
          return;
        }

        if (score === 5) {
          window.location.href = "success.html";
        } else {
          window.location.href = "try-again.html";
        }
      }
    </script>
  </body>
</html>